<!DOCTYPE html><html class=no-js><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Migrate to v2 | Dwolla API</title><meta name=description content="Underlying principles of Dwolla's v2 API and guidance on upgrading your application from Dwolla's legacy v1 API."><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/main.b842.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Roboto+Slab:300|Open+Sans:300,400,600,700"><script src=/js/head-scripts.3bcb.js></script><script src=https://cdn.statuspage.io/se-v2.js></script></head><body><!--[if lt IE 8]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><header><div class="header__primary js-two-col-header-primary"><div class=page-wrap><div><a href=https://www.dwolla.com class="logo icon-logo-dwolla-white">Dwolla</a><div class=hamburger><a href="https://www.dwolla.com/contact?b=nav">Let's talk</a> <a class="btn primary js-hamburger">Menu</a></div></div><nav class=js-hamburger-nav><a href=https://www.dwolla.com/about>Product</a> <a href="/">Documentation</a> <a href=https://www.dwolla.com/login>Log in</a> <a href=https://www.dwolla.com/register>Sign up</a> <a class="btn primary" href="https://www.dwolla.com/contact?b=nav">Let's talk</a></nav></div></div><nav class="header__secondary js-two-col-nav-toggle"><div class=js-two-col-header-secondary><div class=page-wrap><a href="/guides/" class=active>Guides</a> <a href="/resources/">Resources</a> <a href="https://docsv2.dwolla.com/">API docs</a> <a href=/pages/sdks.html class="no-nav js-two-col-no-toggle">SDKs</a><div class="custom-select custom-select--blue js-global-language-select"><select name=select class=js-language-select><option value=raw>raw</option><option value=php>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div></div></div></nav></header><div class=content><div class=cnt-two-col><div class=page-wrap><section class="cnt-two-col__nav js-two-col-nav"><div class=close><button class="js-two-col-nav-close icon-cnt-two-col-close"></button></div><div class=language-picker><h6>Language</h6><div class="custom-select custom-select--blue"><select class=js-language-select name=select><option value=raw>raw</option><option value=php selected>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div></div><!-- nav elements below should be in the same order of the secondary navigation --><nav class="side-nav js-side-nav active"><section id=js-sidenav-dropdown class=side-nav__dropdown><h6>Choose a guide</h6><div class=picker id=js-sidenav-dropdown-button><button>Migrate to v2</button><div class="icon icon-side-nav-collapse-plus"></div><div class="icon icon-side-nav-collapse-minus"></div></div><nav id=js-sidenav-dropdown-nav><a href="/guides/sandbox-setup/">Set up Sandbox</a> <a href="/guides/send-money/">Send money to your users</a> <a href="/guides/receive-money/">Receive money from your users</a> <a href="/guides/transfer-money-between-users/">Transfer money between users</a> <a href="/guides/webhooks/">Webhooks</a></nav></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/send-money>Overview: Send money to your users</a><div class=dot></div><ol><li><a href=/guides/send-money/01-white-label-onboarding.html>Option 1: White label</a><div class=dot></div></li><li><a href=/guides/send-money/01-direct-onboarding.html>Option 2: Dwolla Direct</a><div class=dot></div></li></ol></li><li><a href=/guides/send-money/02-fetch-funding-sources.html>Fetch funding sources</a><div class=dot></div></li><li><a href=/guides/send-money/03-create-transfer.html>Create a transfer</a><div class=dot></div></li><li><a href=/guides/send-money/04-check-transfer.html>Check transfer status</a><div class=dot></div></li></ol></section><!-- <section class="side-nav__options" style="display:none">
    <h6>Options</h6>
    <ul>
        <li class="external-link"><a href="https://developers.dwolla.com/dev/pages/guides/masspay" target="_blank"><span class="icon-sidenav-option">MassPay V1</span></a></li>
        <li class="external-link"><a href=""><span class="icon-sidenav-option">Recurring and Scheduled V1</span></a></li>
    </ul>
</section> --><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/receive-money>Overview</a><div class=dot></div><ol><li><a href=/guides/receive-money/01-white-label-onboarding.html>Option 1: White label</a><div class=dot></div></li><li><a href=/guides/receive-money/01-direct-onboarding.html>Option 2: Dwolla Direct</a><div class=dot></div></li></ol></li><li><a href=/guides/receive-money/02-check-transfer.html>Check transfer status</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/sandbox-setup>Overview: Sandbox setup</a><div class=dot></div></li><li><a href=/guides/sandbox-setup/01-create-sandbox-account.html>Create a Sandbox account</a><div class=dot></div></li><li><a href=/guides/sandbox-setup/02-create-application.html>Create an application</a><div class=dot></div></li><li><a href=/guides/sandbox-setup/03-enable-sdk-sandbox-mode.html>Enable Sandbox mode</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/webhooks>Overview: Webhooks</a><div class=dot></div></li><li><a href=/guides/webhooks/01-obtain-authorization.html>Obtain authorization</a><div class=dot></div></li><li><a href=/guides/webhooks/02-create-subscription.html>Create a webhook subscription</a><div class=dot></div></li><li><a href=/guides/webhooks/03-validating-webhooks.html>Validating webhooks</a><div class=dot></div></li><li><a href=/guides/webhooks/04-process-webhooks.html>Processing webhooks</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>Follow the steps</h6><ol><li><a href=/guides/transfer-money-between-users>Overview: transfer money between your users</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/01-access-token.html>Generate an access token</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/02-create-verified-customer.html>Create a verified customer</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/03-attach-unverified-bank.html>Attach an unverified funding source</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/04-create-unverified-customer.html>Create an unverified Customer</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/05-attach-verified-bank.html>Attach a verified funding source</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/06-create-transfer.html class=active>Create a transfer</a><div class=dot></div></li><li><a href=/guides/transfer-money-between-users/07-check-transfer.html>Check the status of your transfer</a><div class=dot></div></li></ol></section><section class=steps-nav><h6>Follow the steps</h6><ol><li><a href=/guides/migrate-to-v2>Overview: Migrate to v2</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/01-api-v2-principles.html>API v2 principles</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/02-making-requests.html>Making requests</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/03-authentication.html>Authentication</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/04-sdk-support.html>SDK support</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/05-v1-to-v2-endpoint-changes.html>v1 to v2 endpoint changes</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/06-other-notable-changes.html class=active>Other notable changes</a><div class=dot></div></li><li><a href=/guides/migrate-to-v2/07-faq.html>FAQ</a><div class=dot></div></li></ol></section></nav><nav class="side-nav js-side-nav"><section><h6>Tools</h6><ul><li><a href=/resources/sandbox-console.html>Sandbox Console</a></li><li><a href=/resources/token-generator.html>Token generator</a></li><li><a href=/resources/changelog.html>Change log</a></li><li class=external-link><a href="http://status.dwolla.com/" target=_blank><span class=icon-sidenav-option>Status</span></a></li></ul><h6>Articles</h6><ul><li><a href=/resources/account-types.html>Account types</a><ul><li><a href=/resources/account-types/traditional-accounts.html>Traditional accounts</a></li><li><a href=/resources/account-types/white-label-accounts.html>White Label accounts</a></li></ul></li><li><a href=/resources/bank-transfer-workflow.html>Bank transfer workflow</a><ul><li><a href=/resources/bank-transfer-workflow/processing-times.html>Processing times</a></li><li><a href=/resources/bank-transfer-workflow/transfer-failures.html>Transfer failures</a></li></ul></li><li><a href=/resources/customer-verification.html>Customer verification</a><ul><li><a href=/resources/customer-verification/personal-verified-customers.html>Personal verified Customers</a></li><li><a href=/resources/customer-verification/business-verified-customers.html>Business verified Customers</a></li><li><a href=/resources/customer-verification/handling-verification-statuses.html>Handling verification statuses</a></li></ul></li><li><a href=/resources/dwolla-js.html>Dwolla.js</a><ul><li><a href=/resources/dwolla-js/add-a-bank-account.html>Add a bank account</a></li><li><a href=/resources/dwolla-js/instant-account-verification.html>Instant account verification</a></li><li><a href=/resources/dwolla-js/on-demand-bank-transfers.html>On-demand bank transfers</a></li></ul></li><li><a href=/resources/facilitator-fee.html>Facilitator Fee</a><ul></ul></li><li><a href=/resources/funding-source-verification.html>Funding source verification</a><ul><li><a href=/resources/funding-source-verification/micro-deposit-verification.html>Micro-deposit verification</a></li><li><a href=/resources/funding-source-verification/instant-account-verification.html>Instant account verification</a></li></ul></li><li><a href=/resources/oauth-refresh-strategies.html>OAuth refresh strategies</a><ul><li><a href=/resources/oauth-refresh-strategies/preemptively-refresh.html>Preemptively refresh authorization</a></li><li><a href=/resources/oauth-refresh-strategies/refresh-on-demand.html>Refresh on-demand</a></li><li><a href=/resources/oauth-refresh-strategies/refresh-best-practices.html>Refresh best practices</a></li></ul></li></ul></section></nav><nav class="side-nav js-side-nav"><section id=js-sidenav-dropdown class=side-nav__dropdown><ul><li><a href=https://docsv2.dwolla.com/#introduction>Introduction</a></li><li><a href=https://docsv2.dwolla.com/#oauth>OAuth</a></li><li><a href=https://docsv2.dwolla.com/#customers>Customers</a></li><li><a href=https://docsv2.dwolla.com/#documents>Documents</a></li><li><a href=https://docsv2.dwolla.com/#sources>Funding Sources</a></li><li><a href=https://docsv2.dwolla.com/#transfers>Transfers</a></li><li><a href=https://docsv2.dwolla.com/#events>Events</a></li><li><a href=https://docsv2.dwolla.com/#subscriptions>Webhook Subscriptions</a></li><li><a href=https://docsv2.dwolla.com/#webhooks>Webhooks</a></li></ul></section></nav></section><section class=cnt-two-col__content><h1>Migrate to v2</h1><h2>Other notable changes</h2><h4>Webhooks - v1 vs. v2</h4><ul><li><strong>Webhook payload differences</strong> - One of the biggest differences in webhooks sent in v1 vs. v2 is the type of data included in the webhook payload.<ul><li>In v1, the JSON payload includes detailed information on the resource that caused the webhook to be sent. For example, a <a href=https://docs.dwolla.com/#transactionstatus>TransactionStatus</a> webhook would include the entire Transaction Resource with information such as Transaction Id, SourceName, DestinationName, Type, Fees, etc.</li><li>In v2, each webhook sent by Dwolla contains an <a href=https://docsv2.dwolla.com/#events>Event</a> object with an event topic (e.g. transfer_created) and _links to: the associated resource, account associated with the event, and the customer associated with the event (if applicable). Your application will then follow a link to the resource contained in the event to lookup additional information.</li></ul></li><li><strong>Subscribing a webhook URL</strong><ul><li>In v1, the manner in which you registered a URL for receiving webhook notifications was done entirely through the dwolla.com.</li><li>In v2, you’ll create a webhook-subscription which is done <a href=https://docsv2.dwolla.com/#create-a-webhook-subscription>via the API</a> using an <a href=https://docsv2.dwolla.com/#application-access-token>application access token</a>.</li></ul></li><li><strong>Failed webhook attempts and retries</strong><ul><li>In v1, webhook notifications were only sent once—regardless of whether or not your server responded to the request from Dwolla.</li><li>In v2, if your server doesn’t acknowledge the webhook request from Dwolla with a 2xx level status code, then the request will be retried on an exponential backoff schedule. Reference the API docs for more information on <a href=https://docsv2.dwolla.com/#webhook-subscriptions>acknowledgement and retries</a>.</li></ul></li><li><strong>Authenticating webhooks</strong> - To ensure that the requests are coming from a valid source, Dwolla signs webhook requests so that you can verify that any requests you receive are generated by Dwolla and not someone pretending to be Dwolla.<ul><li>Webhook requests in v1 included a X-Dwolla-Signature header, which is an SHA-1 HMAC hash of the request body salted using the consumer application secret.</li><li>In v2, a X-Request-Signature-Sha-256 header is included which is a SHA256 HMAC hash of the request body with the key being your webhook secret. Reference our <a href=https://developers.dwolla.com/guides/webhooks/03-validating-webhooks.html>webhooks guide</a> for more information on validating webhook requests.</li></ul></li></ul><h4>Transactions - How transactions work</h4><ul><li><strong>Transaction Ids</strong><ul><li>In v1, when a payment is sent, two or more transactions are created. At least one is created to credit the recipient’s account, and another one to debit the sender’s account. As a simple example, let’s say Bob sends $5 to Alice from his account balance. From this action, two Transactions are created: Transaction 512010: credits Alice’s account with $5. Transaction 512011: deducts $5 from Bob’s account. It’s important to keep in mind that when Bob looks at this payment, he will see the credit transaction’s ID: 512010. This is called the Sender’s Transaction ID. Similarly, when Alice looks up this payment, she will see a different transaction of ID 512011, which we call the Recipient’s Transaction ID.</li><li>In v2, we’ve reduced the number of unique Ids returned on a payment from two transaction Ids to a single transfer Id.</li></ul></li><li><strong>How transactions are displayed in dwolla.com and emails</strong> - Since unique transaction Ids are different in v2 they will <strong>not</strong> match Ids that are displayed in the legacy dashboard at https://www.dwolla.com or within Dwolla emails. A new dashboard will be released which displays v2 Ids that can be used to reconcile against transfers created in the API.</li></ul><h4>Facilitator Fees</h4><ul><li>Fees must be specified via the API on a per request basis</li><li>By default, fees are sent to the account of the application owner</li><li>Only flat fees can be specified, not a percentage on the amount of the transfer</li></ul><nav class=pager-nav><a href=05-v1-to-v2-endpoint-changes.html>Back: v1 to v2 endpoint changes</a> <a href=07-faq.html>Next step: FAQ</a></nav><hr><footer><div class=page-wrap><nav><h6>Info</h6><a href=https://www.dwolla.com/about>Product</a> <a href=https://developers.dwolla.com>Documentation</a> <a href=https://www.dwolla.com/bank-transfers>Bank transfers</a> <a href=https://www.dwolla.com/same-day-ach>Same Day ACH</a> <a href=https://www.dwolla.com/fisync>FiSync</a> <a href="https://www.dwolla.com/pricing?b=footer">Pricing</a> <a href="https://www.dwolla.com/contact?b=footer">Let's talk</a></nav><nav><h6>Account</h6><a href=https://www.dwolla.com/register>Sign up</a> <a href=https://www.dwolla.com/login>Log in</a> <a href=http://help.dwolla.com>Support</a> <a href=https://www.dwolla.com/security>Security</a> <a href="https://www.dwolla.com/legal/privacy/">Privacy</a> <a href="https://www.dwolla.com/legal/tos/">Legal</a></nav><nav><h6>Elsewhere</h6><a href=https://twitter.com/dwolla>Twitter</a> <a href=https://www.facebook.com/dwolla>Facebook</a> <a href=https://www.linkedin.com/company/dwolla>Linkedin</a> <a href=https://github.com/dwolla>GitHub</a></nav><nav><h6>Learn more</h6><a href=https://www.dwolla.com/press>Press</a> <a href=https://www.dwolla.com/updates>Updates</a> <a href=https://www.dwolla.com/careers>Careers</a></nav></div></footer><section class=disclaimer><div class=page-wrap><h5>Financial institutions play an important role in the Dwolla network.</h5><p>Dwolla, Inc. is an agent of Veridian Credit Union and Compass Bank and all funds associated with your account in the Dwolla network are held in pooled accounts at Veridian Credit Union and Compass Bank. These funds are not eligible for individual insurance, including FDIC insurance and may not be eligible for share insurance by the National Credit Union Share Insurance Fund. Dwolla, Inc. is the operator of a software platform that communicates user instructions for funds transfers to Veridian Credit Union and Compass Bank.</p></div></section><section class=copyright><div class=page-wrap><div><span>© 2016 Dwolla, Inc.</span> <a href="https://www.dwolla.com/legal/about-our-financial-institution-partner/">Dwolla, Inc. is an agent of its Financial Institution Partner(s)</a></div></div></section></section></div></div></div><script src=//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script>window.jQuery || document.write('<script src="/_bower_components/jquery/jquery.min.js"><\/script>')</script><script src=/js/script.3a68.js></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-30404064-1');ga('send','pageview');</script></body></html>